# Best of Series é”¦æ ‡èµ›å®ç°æ€»ç»“

## âœ… å®ç°å®Œæˆæƒ…å†µ

### 1. æ ¸å¿ƒå¤„ç†å™¨
- âœ… **bestOfSeriesHandler.ts** - å®Œæ•´çš„Best of Serieså¤„ç†å™¨
  - `join()` - åŠ å…¥é”¦æ ‡èµ›é€»è¾‘
  - `submitScore()` - æäº¤åˆ†æ•°é€»è¾‘
  - `settle()` - ç»“ç®—é”¦æ ‡èµ›é€»è¾‘

### 2. å¤„ç†å™¨æ˜ å°„
- âœ… **handler/index.ts** - æ›´æ–°å¤„ç†å™¨æ˜ å°„
  - `"best_of_series_tournament"` â†’ `bestOfSeriesHandler`
  - `"bo3_tournament"` â†’ `bestOfSeriesHandler`
  - `"bo5_tournament"` â†’ `bestOfSeriesHandler`

### 3. é…ç½®ç¤ºä¾‹
- âœ… **tournamentConfigs.ts** - æ·»åŠ é…ç½®ç¤ºä¾‹
  - ä¸‰å±€ä¸¤èƒœé”¦æ ‡èµ›é…ç½®
  - äº”å±€ä¸‰èƒœé”¦æ ‡èµ›é…ç½®
  - å®Œæ•´çš„é™åˆ¶å’Œå¥–åŠ±é…ç½®

### 4. è®¾è®¡æ–‡æ¡£
- âœ… **BestOfSeriesDesign.md** - è¯¦ç»†è®¾è®¡æ–‡æ¡£
  - æŠ€æœ¯å®ç°è¯´æ˜
  - é…ç½®ç¤ºä¾‹
  - æ¸¸æˆæµç¨‹
  - æ‰©å±•åŠŸèƒ½

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•°æ®åº“ç»“æ„
```typescript
// matches è¡¨ - ç³»åˆ—èµ›æ¯”èµ›
{
  tournamentId: string,
  matchType: "best_of_series",
  gameData: {
    seriesConfig: {
      totalGames: number,      // æ€»å±€æ•°
      gamesToWin: number,      // è·èƒœæ‰€éœ€å±€æ•°
      currentGame: number,     // å½“å‰å±€æ•°
      playerScores: {          // ç©å®¶åˆ†æ•°ç»Ÿè®¡
        [uid: string]: {
          wins: number,
          losses: number,
          totalScore: number,
          games: Array<GameResult>
        }
      },
      gameResults: Array<GameResult>,
      seriesComplete: boolean
    }
  }
}
```

### æ ¸å¿ƒé€»è¾‘
1. **åŠ å…¥é”¦æ ‡èµ›**ï¼šåˆ›å»ºç³»åˆ—èµ›æ¯”èµ›ï¼Œåˆå§‹åŒ–é…ç½®
2. **æäº¤åˆ†æ•°**ï¼šè®°å½•å•å±€ç»“æœï¼Œæ›´æ–°ç»Ÿè®¡ï¼Œæ£€æŸ¥èƒœè´Ÿ
3. **ç»“ç®—é”¦æ ‡èµ›**ï¼šè®¡ç®—æœ€ç»ˆæ’åï¼Œåˆ†é…å¥–åŠ±

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### 1. çµæ´»çš„é…ç½®
- å¯é…ç½®æ€»å±€æ•°ï¼ˆ3å±€ã€5å±€ç­‰ï¼‰
- å¯é…ç½®è·èƒœæ¡ä»¶ï¼ˆ2èƒœã€3èƒœç­‰ï¼‰
- å¯é…ç½®æ—¶é—´é™åˆ¶å’Œå¥–åŠ±è§„åˆ™

### 2. å®Œæ•´çš„ç»Ÿè®¡
- èƒœå±€æ•°å’Œè´Ÿå±€æ•°ç»Ÿè®¡
- æ€»åˆ†å’Œå¹³å‡åˆ†è®¡ç®—
- æ¯å±€è¯¦ç»†è®°å½•ä¿å­˜

### 3. æ™ºèƒ½èƒœè´Ÿåˆ¤å®š
- ä¼˜å…ˆæŒ‰èƒœå±€æ•°æ’å
- èƒœå±€æ•°ç›¸åŒæ—¶æŒ‰æ€»åˆ†æ’å
- æ”¯æŒå¹³å±€å¤„ç†æœºåˆ¶

### 4. å®æ—¶çŠ¶æ€æ›´æ–°
- ç³»åˆ—èµ›è¿›åº¦å®æ—¶æ›´æ–°
- ç©å®¶ç»Ÿè®¡å®æ—¶è®¡ç®—
- å®ŒæˆçŠ¶æ€è‡ªåŠ¨æ£€æµ‹

## ğŸ“Š é…ç½®ç¤ºä¾‹

### ä¸‰å±€ä¸¤èƒœé”¦æ ‡èµ›
```typescript
{
  typeId: "best_of_series_tournament",
  name: "ä¸‰å±€ä¸¤èƒœé”¦æ ‡èµ›",
  matchRules: {
    matchType: "best_of_series",
    specialRules: [
      { type: "total_games", value: 3 },
      { type: "games_to_win", value: 2 }
    ]
  }
}
```

### äº”å±€ä¸‰èƒœé”¦æ ‡èµ›
```typescript
{
  typeId: "bo5_tournament",
  name: "äº”å±€ä¸‰èƒœé”¦æ ‡èµ›",
  matchRules: {
    matchType: "best_of_series",
    specialRules: [
      { type: "total_games", value: 5 },
      { type: "games_to_win", value: 3 }
    ]
  }
}
```

## ğŸ”„ ä½¿ç”¨æµç¨‹

### 1. ç©å®¶åŠ å…¥
```typescript
const result = await TournamentService.joinTournament(ctx, {
  uid: "player123",
  gameType: "chess",
  tournamentType: "best_of_series_tournament"
});
```

### 2. æäº¤åˆ†æ•°
```typescript
const result = await TournamentService.submitScore(ctx, {
  tournamentId: "tournament_123",
  uid: "player123",
  gameType: "chess",
  score: 1500,
  gameData: { /* æ¸¸æˆæ•°æ® */ },
  propsUsed: ["hint"]
});
```

### 3. è‡ªåŠ¨ç»“ç®—
- å½“æœ‰ç©å®¶è¾¾åˆ°è·èƒœå±€æ•°æ—¶è‡ªåŠ¨ç»“ç®—
- å½“æ‰€æœ‰å±€æ•°å®Œæˆæ—¶è‡ªåŠ¨ç»“ç®—
- è®¡ç®—æœ€ç»ˆæ’åå¹¶åˆ†é…å¥–åŠ±

## ğŸš€ æ‰©å±•èƒ½åŠ›

### 1. æ”¯æŒçš„æ¸¸æˆç±»å‹
- å›½é™…è±¡æ£‹ (chess)
- æ‹‰ç±³çº¸ç‰Œ (rummy)
- å…¶ä»–ç­–ç•¥æ€§æ¸¸æˆ

### 2. å¯æ‰©å±•çš„é…ç½®
- è‡ªå®šä¹‰æ€»å±€æ•°
- è‡ªå®šä¹‰è·èƒœæ¡ä»¶
- è‡ªå®šä¹‰æ—¶é—´é™åˆ¶
- è‡ªå®šä¹‰å¥–åŠ±è§„åˆ™

### 3. æœªæ¥æ‰©å±•
- å›¢é˜Ÿæ¨¡å¼æ”¯æŒ
- å¤šè½®é”¦æ ‡èµ›
- è§‚æˆ˜åŠŸèƒ½
- å†å²å›æ”¾

## ğŸ” æµ‹è¯•å»ºè®®

### 1. åŸºæœ¬åŠŸèƒ½æµ‹è¯•
- ä¸‰å±€ä¸¤èƒœæ­£å¸¸æµç¨‹
- äº”å±€ä¸‰èƒœæ­£å¸¸æµç¨‹
- å¹³å±€å¤„ç†æœºåˆ¶
- è¶…æ—¶å¤„ç†æœºåˆ¶

### 2. å¼‚å¸¸æƒ…å†µæµ‹è¯•
- ç©å®¶æ–­çº¿é‡è¿
- ç³»ç»Ÿå¼‚å¸¸æ¢å¤
- æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
- å¹¶å‘è®¿é—®å¤„ç†

### 3. æ€§èƒ½æµ‹è¯•
- å¤§é‡å¹¶å‘ç³»åˆ—èµ›
- é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§
- æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸€è‡´æ€§**ï¼šç¡®ä¿ç³»åˆ—èµ›çŠ¶æ€çš„ä¸€è‡´æ€§
2. **å¹¶å‘å®‰å…¨**ï¼šå¤„ç†å¤šç©å®¶åŒæ—¶æäº¤åˆ†æ•°çš„æƒ…å†µ
3. **é”™è¯¯æ¢å¤**ï¼šç³»ç»Ÿå¼‚å¸¸æ—¶çš„æ•°æ®æ¢å¤æœºåˆ¶
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§é‡ç³»åˆ—èµ›æ—¶çš„æ€§èƒ½è€ƒè™‘
5. **ç”¨æˆ·ä½“éªŒ**ï¼šæ¸…æ™°çš„è¿›åº¦æ˜¾ç¤ºå’ŒçŠ¶æ€åé¦ˆ

## ğŸ‰ æ€»ç»“

Best of Series é”¦æ ‡èµ›åŠŸèƒ½å·²å®Œå…¨å®ç°ï¼ŒåŒ…æ‹¬ï¼š

- âœ… å®Œæ•´çš„å¤„ç†å™¨å®ç°
- âœ… çµæ´»çš„é…ç½®ç³»ç»Ÿ
- âœ… æ™ºèƒ½çš„èƒœè´Ÿåˆ¤å®š
- âœ… è¯¦ç»†çš„ç»Ÿè®¡è®°å½•
- âœ… å®Œå–„çš„æ–‡æ¡£è¯´æ˜

è¯¥åŠŸèƒ½ç°å·²å¯ä»¥æŠ•å…¥ä½¿ç”¨ï¼Œæ”¯æŒå„ç§ç­–ç•¥æ€§æ¸¸æˆçš„å¤šå±€åˆ¶æ¯”èµ›æ¨¡å¼ã€‚ 