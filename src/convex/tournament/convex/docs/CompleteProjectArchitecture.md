# å®Œæ•´é¡¹ç›®ç³»ç»Ÿæ¶æ„è®¾è®¡

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºç°æœ‰ä»£ç åˆ†æï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½çš„æ¸¸æˆå¹³å°ç³»ç»Ÿï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œä½¿ç”¨ Convex ä½œä¸ºåç«¯æ•°æ®åº“å’Œå®æ—¶é€šä¿¡å¹³å°ã€‚ç³»ç»Ÿé›†æˆäº†ä»»åŠ¡ç³»ç»Ÿã€é—¨ç¥¨ç³»ç»Ÿã€Battle Passç³»ç»Ÿã€æ®µä½ç³»ç»Ÿã€æ’è¡Œæ¦œç³»ç»Ÿç­‰å¤šä¸ªæ ¸å¿ƒæ¨¡å—ã€‚

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### **æŠ€æœ¯æ ˆ**
```
å‰ç«¯: React + TypeScript
åç«¯: Convex (å®æ—¶æ•°æ®åº“ + API)
éƒ¨ç½²: Netlify
æ¸¸æˆå¼•æ“: è‡ªå®šä¹‰æ¸¸æˆå¼•æ“
3Dæ¸²æŸ“: Three.js (éƒ¨åˆ†æ¨¡å—)
```

### **ç³»ç»Ÿæ¶æ„å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±‚ (React + TypeScript)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Game Launcher  â”‚  Lobby System  â”‚  Battle System  â”‚  UI  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APIå±‚ (Convex Functions)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tournament  â”‚  Task  â”‚  BattlePass  â”‚  Segment  â”‚  Ticket â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®å±‚ (Convex Database)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  player_*  â”‚  tournament_*  â”‚  task_*  â”‚  battle_pass_*  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ® æ ¸å¿ƒç³»ç»Ÿæ¨¡å—

### **1. æ¸¸æˆç³»ç»Ÿ (Game System)**

#### **æ¸¸æˆç±»å‹**
- **Solitaire**: çº¸ç‰Œæ¸¸æˆ
- **Chess**: å›½é™…è±¡æ£‹
- **Ludo**: é£è¡Œæ£‹
- **å…¶ä»–æ¸¸æˆ**: å¯æ‰©å±•çš„æ¸¸æˆç±»å‹

#### **æ¸¸æˆå¼•æ“æ¶æ„**
```typescript
// æ¸¸æˆå¯åŠ¨å™¨
GameLauncher.tsx
â”œâ”€â”€ SolitaireLauncher.tsx
â”œâ”€â”€ ChessLauncher.tsx
â””â”€â”€ LudoLauncher.tsx

// æ¸¸æˆæ ¸å¿ƒ
PlayGround.tsx
â”œâ”€â”€ battle/          // æˆ˜æ–—ç³»ç»Ÿ
â”œâ”€â”€ map.css          // åœ°å›¾æ ·å¼
â””â”€â”€ util/            // å·¥å…·å‡½æ•°
```

#### **æ¸¸æˆæµç¨‹**
```
1. ç©å®¶é€‰æ‹©æ¸¸æˆç±»å‹
2. è¿›å…¥æ¸¸æˆå¤§å…
3. åŒ¹é…å¯¹æ‰‹æˆ–AI
4. å¼€å§‹æ¸¸æˆå¯¹å±€
5. ç»“ç®—å¥–åŠ±å’Œç§¯åˆ†
6. æ›´æ–°æ’è¡Œæ¦œå’Œæ®µä½
```

### **2. é”¦æ ‡èµ›ç³»ç»Ÿ (Tournament System)**

#### **é”¦æ ‡èµ›ç±»å‹**
```typescript
// å¿«é€Ÿå¯¹å±€ (Quick Match)
quick_match_solitaire_free    // å…è´¹å¿«é€Ÿå¯¹å±€
quick_match_solitaire_ticket  // é—¨ç¥¨å¿«é€Ÿå¯¹å±€

// ç‰¹æ®Šé”¦æ ‡èµ›
daily_special                 // æ¯æ—¥ç‰¹æ®Šèµ›
weekly_championship          // æ¯å‘¨é”¦æ ‡èµ›
seasonal_tournament          // èµ›å­£é”¦æ ‡èµ›
```

#### **æ ¸å¿ƒåŠŸèƒ½**
- **åŒ¹é…ç³»ç»Ÿ**: åŸºäºæŠ€èƒ½å’Œæ®µä½çš„æ™ºèƒ½åŒ¹é…
- **å¥–åŠ±ç³»ç»Ÿ**: é‡‘å¸ã€èµ›å­£ç§¯åˆ†ã€æ®µä½ç§¯åˆ†
- **æ’è¡Œæ¦œ**: å®æ—¶æ’è¡Œæ¦œæ›´æ–°
- **é™åˆ¶ç³»ç»Ÿ**: æ¯æ—¥/æ¯å‘¨å‚ä¸é™åˆ¶

#### **æ•°æ®æµ**
```
ç©å®¶å‚ä¸ â†’ åŒ¹é…å¯¹æ‰‹ â†’ å¼€å§‹å¯¹å±€ â†’ ç»“ç®—ç»“æœ â†’ æ›´æ–°ç§¯åˆ† â†’ æ›´æ–°æ’è¡Œæ¦œ
```

### **3. ä»»åŠ¡ç³»ç»Ÿ (Task System)**

#### **ä»»åŠ¡ç±»å‹**
```typescript
// ä»»åŠ¡ç±»å‹
one_time    // ä¸€æ¬¡æ€§ä»»åŠ¡
daily       // æ¯æ—¥ä»»åŠ¡
weekly      // æ¯å‘¨ä»»åŠ¡
seasonal    // èµ›å­£ä»»åŠ¡

// ä»»åŠ¡æ¡ä»¶
simple       // ç®€å•æ¡ä»¶
multi_stage  // å¤šé˜¶æ®µæ¡ä»¶
conditional  // æ¡ä»¶ä»»åŠ¡
time_based   // æ—¶é—´ä»»åŠ¡
```

#### **ä»»åŠ¡åˆ†ç±»**
- **gameplay**: æ¸¸æˆç›¸å…³ä»»åŠ¡
- **social**: ç¤¾äº¤ä»»åŠ¡
- **collection**: æ”¶é›†ä»»åŠ¡
- **challenge**: æŒ‘æˆ˜ä»»åŠ¡
- **tournament**: é”¦æ ‡èµ›ä»»åŠ¡
- **achievement**: æˆå°±ä»»åŠ¡

#### **ä¸‰è¡¨è®¾è®¡**
```typescript
// æ´»è·ƒä»»åŠ¡
player_tasks: {
    uid: string,
    templateId: string,
    currentValue: number,
    isCompleted: boolean,
    dueTime: string
}

// å·²å®Œæˆä»»åŠ¡
completed_tasks: {
    uid: string,
    templateId: string,
    completedAt: string,
    rewards: TaskRewards
}

// è¿‡æœŸä»»åŠ¡
expired_tasks: {
    uid: string,
    templateId: string,
    expiredAt: string,
    lastValue: number
}
```

### **4. Battle Passç³»ç»Ÿ (Battle Pass System)**

#### **ç³»ç»Ÿè®¾è®¡**
```typescript
// 25çº§è¿›åº¦ç³»ç»Ÿ
seasonPointsPerLevel: 100
maxLevel: 25

// åŒè½¨é“è®¾è®¡
freeTrack:     // å…è´¹è½¨é“
premiumTrack:  // ä»˜è´¹è½¨é“ (500é‡‘å¸)
```

#### **ç§¯åˆ†æ¥æº**
- **ä»»åŠ¡å¥–åŠ±**: 30%
- **å¿«é€Ÿå¯¹å±€**: 20%
- **æ¯æ—¥/æ¯å‘¨æ’è¡Œæ¦œ**: 25%
- **æ®µä½å‡çº§**: 10%
- **ç¤¾äº¤æ´»åŠ¨**: 10%
- **æˆå°±è§£é”**: 5%

#### **å¥–åŠ±ç»“æ„**
```typescript
// å…è´¹è½¨é“æ€»å¥–åŠ±
{
    coins: 2500,
    tickets: [
        { type: "bronze", quantity: 8 },
        { type: "silver", quantity: 3 },
        { type: "gold", quantity: 1 }
    ]
}

// ä»˜è´¹è½¨é“æ€»å¥–åŠ±
{
    coins: 5000,
    tickets: [
        { type: "bronze", quantity: 15 },
        { type: "silver", quantity: 8 },
        { type: "gold", quantity: 6 }
    ],
    exclusiveItems: [
        {
            itemId: "premium_avatar_25",
            itemType: "avatar",
            name: "å®—å¸ˆå¤´åƒ",
            rarity: "legendary"
        }
    ]
}
```

### **5. æ®µä½ç³»ç»Ÿ (Segment System)**

#### **æ®µä½ç­‰çº§**
```typescript
// 7ä¸ªæ®µä½ç­‰çº§
bronze      // é’é“œ (0-999ç§¯åˆ†)
silver      // ç™½é“¶ (1000-1999ç§¯åˆ†)
gold        // é»„é‡‘ (2000-2999ç§¯åˆ†)
platinum    // é“‚é‡‘ (3000-3999ç§¯åˆ†)
diamond     // é’»çŸ³ (4000-4999ç§¯åˆ†)
master      // å¤§å¸ˆ (5000-5999ç§¯åˆ†)
grandmaster // å®—å¸ˆ (6000+ç§¯åˆ†)
```

#### **å‡çº§å¥–åŠ±**
```typescript
// æ®µä½å‡çº§å¥–åŠ±
upgradeRewards: {
    coins: number,
    seasonPoints: number,
    tickets: Ticket[],
    props: Prop[]
}
```

#### **ç§¯åˆ†æ¥æº**
- **é”¦æ ‡èµ›**: æ ¹æ®æ’åè·å¾—ç§¯åˆ†
- **å¿«é€Ÿå¯¹å±€**: èƒœåˆ©è·å¾—ç§¯åˆ†
- **æ’è¡Œæ¦œå¥–åŠ±**: æ’åå¥–åŠ±ç§¯åˆ†
- **ä»»åŠ¡å¥–åŠ±**: ä»»åŠ¡å®Œæˆè·å¾—ç§¯åˆ†

### **6. é—¨ç¥¨ç³»ç»Ÿ (Ticket System)**

#### **é—¨ç¥¨ç±»å‹**
```typescript
// ä¸‰ç§é—¨ç¥¨ç±»å‹
bronze: {
    price: { coins: 100 },
    maxUsagePerDay: 10,
    seasonalRetention: 1.0  // 100%è·¨èµ›å­£ä¿ç•™
},
silver: {
    price: { coins: 250 },
    maxUsagePerDay: 5,
    seasonalRetention: 0.5  // 50%è·¨èµ›å­£ä¿ç•™
},
gold: {
    price: { coins: 500 },
    maxUsagePerDay: 3,
    seasonalRetention: 0.0  // 0%è·¨èµ›å­£ä¿ç•™
}
```

#### **è·¨èµ›å­£ä¿ç•™ç­–ç•¥**
- **é’é“œé—¨ç¥¨**: å®Œå…¨ä¿ç•™ï¼Œé€‚åˆé•¿æœŸæŠ•èµ„
- **ç™½é“¶é—¨ç¥¨**: 50%ä¿ç•™ï¼Œå¹³è¡¡ç­–ç•¥
- **é»„é‡‘é—¨ç¥¨**: å®Œå…¨é‡ç½®ï¼ŒçŸ­æœŸä½¿ç”¨

### **7. æ’è¡Œæ¦œç³»ç»Ÿ (Leaderboard System)**

#### **æ’è¡Œæ¦œç±»å‹**
```typescript
// æ¯æ—¥æ’è¡Œæ¦œ
daily_leaderboard_points           // ç»¼åˆæ’è¡Œæ¦œ
daily_leaderboard_points_by_game  // æ¸¸æˆç‰¹å®šæ’è¡Œæ¦œ

// æ¯å‘¨æ’è¡Œæ¦œ
weekly_leaderboard_points          // ç»¼åˆæ’è¡Œæ¦œ
weekly_leaderboard_points_by_game // æ¸¸æˆç‰¹å®šæ’è¡Œæ¦œ
```

#### **ç§¯åˆ†è®¡ç®—**
```typescript
// æ¯å±€ç§¯åˆ†è§„åˆ™
matchPoints: {
    "1": 3,  // ç¬¬1åè·å¾—3åˆ†
    "2": 2,  // ç¬¬2åè·å¾—2åˆ†
    "3": 1,  // ç¬¬3åè·å¾—1åˆ†
    "4": 0   // ç¬¬4åè·å¾—0åˆ†
}
```

#### **å¥–åŠ±ç»“æ„**
```typescript
// æ’è¡Œæ¦œå¥–åŠ±
rewards: [
    {
        rankRange: [1, 1],     // ç¬¬1å
        rankPoints: 100,
        seasonPoints: 50,
        coins: 200
    },
    {
        rankRange: [2, 3],     // ç¬¬2-3å
        rankPoints: 50,
        seasonPoints: 25,
        coins: 100
    }
]
```

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### **æ ¸å¿ƒè¡¨ç»“æ„**

#### **ç©å®¶ç›¸å…³è¡¨**
```typescript
players: {
    uid: string,
    username: string,
    coins: number,
    gamePoints: GamePoints,
    seasonPoints: number,
    rankPoints: number,
    segmentName: string
}

player_segments: {
    uid: string,
    segmentName: string,
    rankPoints: number,
    seasonId: string,
    upgradeHistory: SegmentUpgradeHistory[]
}

player_battle_pass: {
    uid: string,
    seasonId: string,
    currentLevel: number,
    currentSeasonPoints: number,
    totalSeasonPoints: number,
    isPremium: boolean,
    claimedLevels: number[]
}
```

#### **æ¸¸æˆç›¸å…³è¡¨**
```typescript
tournaments: {
    tournamentId: string,
    typeId: string,
    gameType: string,
    status: string,
    participants: Participant[],
    results: Result[]
}

matches: {
    matchId: string,
    tournamentId: string,
    gameType: string,
    players: Player[],
    status: string,
    result: MatchResult
}
```

#### **ä»»åŠ¡ç›¸å…³è¡¨**
```typescript
task_templates: {
    templateId: string,
    name: string,
    type: string,
    category: string,
    condition: TaskCondition,
    rewards: TaskRewards
}

player_tasks: {
    uid: string,
    templateId: string,
    currentValue: number,
    isCompleted: boolean,
    dueTime: string
}
```

#### **é—¨ç¥¨ç›¸å…³è¡¨**
```typescript
player_tickets: {
    uid: string,
    type: string,
    quantity: number,
    seasonId: string
}

ticket_usage_stats: {
    uid: string,
    type: string,
    totalUsed: number,
    totalWon: number,
    winRate: number
}
```

#### **æ’è¡Œæ¦œç›¸å…³è¡¨**
```typescript
daily_leaderboard_points: {
    date: string,
    uid: string,
    totalScore: number,
    matchesPlayed: number
}

weekly_leaderboard_points: {
    weekStart: string,
    uid: string,
    totalScore: number,
    matchesPlayed: number
}
```

## ğŸ”„ ç³»ç»Ÿé›†æˆæµç¨‹

### **1. ç©å®¶ç™»å½•æµç¨‹**
```
1. ç©å®¶ç™»å½•
2. æ£€æŸ¥å¹¶åˆ†é…ä»»åŠ¡
3. å¤„ç†è¿‡æœŸä»»åŠ¡
4. åˆå§‹åŒ–Battle Pass
5. æ£€æŸ¥æ®µä½çŠ¶æ€
6. è¿”å›ç©å®¶æ•°æ®
```

### **2. æ¸¸æˆå®Œæˆæµç¨‹**
```
1. æ¸¸æˆå¯¹å±€ç»“æŸ
2. ç»“ç®—æ¸¸æˆç»“æœ
3. æ›´æ–°æ®µä½ç§¯åˆ†
4. æ›´æ–°èµ›å­£ç§¯åˆ†
5. æ›´æ–°æ’è¡Œæ¦œ
6. æ£€æŸ¥ä»»åŠ¡è¿›åº¦
7. å‘æ”¾å¥–åŠ±
```

### **3. ä»»åŠ¡å®Œæˆæµç¨‹**
```
1. ä»»åŠ¡è¿›åº¦æ›´æ–°
2. æ£€æŸ¥ä»»åŠ¡å®Œæˆ
3. å‘æ”¾ä»»åŠ¡å¥–åŠ±
4. æ›´æ–°èµ›å­£ç§¯åˆ†
5. æ£€æŸ¥Battle Passå‡çº§
6. è®°å½•å®Œæˆæ—¥å¿—
```

### **4. èµ›å­£é‡ç½®æµç¨‹**
```
1. èµ›å­£ç»“æŸ
2. ç»“ç®—æ’è¡Œæ¦œå¥–åŠ±
3. å¤„ç†é—¨ç¥¨è·¨èµ›å­£ä¿ç•™
4. é‡ç½®Battle Pass
5. é‡ç½®æ®µä½ç§¯åˆ†
6. å¼€å§‹æ–°èµ›å­£
```

## ğŸ¯ ä¸šåŠ¡é€»è¾‘

### **ç»æµç³»ç»Ÿ**
```typescript
// è´§å¸ç±»å‹
coins:        // é€šç”¨è´§å¸ï¼Œå¯è´­ä¹°é—¨ç¥¨å’Œé“å…·
seasonPoints: // èµ›å­£ç§¯åˆ†ï¼Œé©±åŠ¨Battle Pass
rankPoints:   // æ®µä½ç§¯åˆ†ï¼Œé©±åŠ¨æ®µä½ç³»ç»Ÿ
gamePoints:   // æ¸¸æˆç§¯åˆ†ï¼Œæ¸¸æˆå†…ä½¿ç”¨

// ç§¯åˆ†æ¥æº
coins:        ä»»åŠ¡å¥–åŠ±ã€æ’è¡Œæ¦œå¥–åŠ±ã€æ®µä½å‡çº§
seasonPoints: ä»»åŠ¡å¥–åŠ±ã€å¿«é€Ÿå¯¹å±€ã€æ’è¡Œæ¦œã€æ®µä½å‡çº§
rankPoints:   é”¦æ ‡èµ›ã€å¿«é€Ÿå¯¹å±€ã€æ’è¡Œæ¦œã€ä»»åŠ¡
```

### **å¹³è¡¡æ€§è®¾è®¡**
```typescript
// æ¯æ—¥é™åˆ¶
dailyLimits: {
    quickMatch: 10,    // å…è´¹å¿«é€Ÿå¯¹å±€
    tournament: 5,     // é”¦æ ‡èµ›å‚ä¸
    taskClaims: 20,    // ä»»åŠ¡é¢†å–
    ticketUsage: 10    // é—¨ç¥¨ä½¿ç”¨
}

// æ¯å‘¨é™åˆ¶
weeklyLimits: {
    leaderboardRewards: 1,  // æ’è¡Œæ¦œå¥–åŠ±
    segmentUpgrades: 3      // æ®µä½å‡çº§
}
```

### **å¥–åŠ±æœºåˆ¶**
```typescript
// å¥–åŠ±ä¼˜å…ˆçº§
1. åŸºç¡€å¥–åŠ± (é‡‘å¸ã€ç§¯åˆ†)
2. æ®µä½å¥–åŠ± (æ®µä½ç§¯åˆ†ã€å‡çº§å¥–åŠ±)
3. Battle Passå¥–åŠ± (èµ›å­£ç§¯åˆ†ã€ç­‰çº§å¥–åŠ±)
4. ç‰¹æ®Šå¥–åŠ± (ä¸“å±ç‰©å“ã€ç¨€æœ‰é“å…·)
```

## ğŸ”§ æŠ€æœ¯å®ç°

### **APIè®¾è®¡**
```typescript
// æŸ¥è¯¢æ¥å£
getPlayerBattlePass(uid: string)
getPlayerTasks(uid: string)
getSeasonLeaderboard(limit: number)
getSegmentDistribution()

// ä¿®æ”¹æ¥å£
addSeasonPoints(uid, amount, source)
claimTaskRewards(uid, taskId)
purchaseTicket(uid, type, quantity)
```

### **æ€§èƒ½ä¼˜åŒ–**
```typescript
// ç´¢å¼•ç­–ç•¥
by_uid_season: ["uid", "seasonId"]
by_season_totalSeasonPoints: ["seasonId", "totalSeasonPoints"]
by_date_score: ["date", "totalScore"]

// ç¼“å­˜ç­–ç•¥
configCache: Map<string, BattlePassConfig>
leaderboardCache: Map<string, any[]>
statsCache: Map<string, BattlePassStats>
```

### **ç›‘æ§æŒ‡æ ‡**
```typescript
// å…³é”®æŒ‡æ ‡
totalPlayers: number,
averageLevel: number,
premiumConversionRate: number,
completionRate: number,
averageSeasonPoints: number

// æ¥æºåˆ†å¸ƒ
sourceDistribution: {
    tournament: number,
    quickMatch: number,
    task: number,
    social: number,
    achievement: number,
    segmentUpgrade: number
}
```

## ğŸš€ æ‰©å±•æ€§è®¾è®¡

### **æ–°æ¸¸æˆç±»å‹æ”¯æŒ**
```typescript
// æ¸¸æˆç±»å‹æ‰©å±•
interface GameType {
    type: string,
    name: string,
    rules: GameRules,
    rewards: GameRewards
}

// æ–°å¢æ¸¸æˆ
const newGame: GameType = {
    type: "puzzle",
    name: "ç›Šæ™ºæ¸¸æˆ",
    rules: { /* æ¸¸æˆè§„åˆ™ */ },
    rewards: { /* å¥–åŠ±é…ç½® */ }
}
```

### **æ–°ä»»åŠ¡ç±»å‹æ”¯æŒ**
```typescript
// ä»»åŠ¡æ¡ä»¶æ‰©å±•
interface ExtendedTaskCondition extends TaskCondition {
    newConditionType?: NewConditionType;
    customLogic?: CustomLogic;
}
```

### **æ–°å¥–åŠ±ç±»å‹æ”¯æŒ**
```typescript
// å¥–åŠ±ç±»å‹æ‰©å±•
interface ExtendedRewards extends BattlePassRewards {
    newRewardType?: NewRewardType[];
    customItems?: CustomItem[];
    specialEffects?: SpecialEffect[];
}
```

## ğŸ“Š éƒ¨ç½²æ¶æ„

### **å¼€å‘ç¯å¢ƒ**
```
æœ¬åœ°å¼€å‘ â†’ Convex Dev â†’ æµ‹è¯•æ•°æ®åº“
```

### **ç”Ÿäº§ç¯å¢ƒ**
```
Netlify â†’ Convex Production â†’ ç”Ÿäº§æ•°æ®åº“
```

### **æ•°æ®å¤‡ä»½**
```
å®æ—¶å¤‡ä»½ â†’ å®šæœŸå¿«ç…§ â†’ ç¾éš¾æ¢å¤
```

è¿™ä¸ªå®Œæ•´çš„ç³»ç»Ÿæ¶æ„è®¾è®¡æ¶µç›–äº†æ¸¸æˆå¹³å°çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæä¾›äº†å¯æ‰©å±•ã€é«˜æ€§èƒ½ã€ç”¨æˆ·å‹å¥½çš„æ¸¸æˆä½“éªŒï¼ 