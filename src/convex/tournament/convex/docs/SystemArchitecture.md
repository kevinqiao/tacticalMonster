# 游戏平台系统架构图

## 整体架构

```
┌─────────────────────────────────────────────────────────────────┐
│                    游戏平台基于赛季设计                        │
├─────────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐      │
│  │  赛季积分   │    │  Battle     │    │   锦标赛    │      │
│  │  系统       │◄──►│  Pass       │◄──►│   系统      │      │
│  │  (核心)     │    │  系统       │    │  (主要来源) │      │
│  └─────────────┘    └─────────────┘    └─────────────┘      │
│         ▲                   ▲                   ▲            │
│         │                   │                   │            │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐      │
│  │   任务      │    │   道具      │    │   门票      │      │
│  │   系统      │    │   系统      │    │   系统      │      │
│  │ (多样化来源)│    │ (游戏增强)  │    │ (统一管理)  │      │
│  └─────────────┘    └─────────────┘    └─────────────┘      │
│                                                               │
└─────────────────────────────────────────────────────────────────┘
```

## 赛季积分流向

```
┌─────────────────┐    赛季积分获取     ┌─────────────────┐
│   锦标赛系统    │ ──────────────────► │   赛季积分池    │
│   (54.4%)      │                    │                │
└─────────────────┘                    └─────────────────┘
         │                                       │
         │                                       │
┌─────────────────┐                              │
│   任务系统      │ ──────────────────────────────┘
│   (22%)        │                              │
└─────────────────┘                              │
         │                                       │
         │                                       │
┌─────────────────┐                              │
│   道具对局      │ ──────────────────────────────┘
│   (22%)        │                              │
└─────────────────┘                              │
         │                                       │
         │                                       │
┌─────────────────┐                              │
│   快速对局      │ ──────────────────────────────┘
│   (1.6%)       │                              │
└─────────────────┘                              │
                                                 │
                                                 ▼
┌─────────────────────────────────────────────────────────────┐
│                    Battle Pass 系统                        │
│                                                           │
│  ┌─────────────┐                    ┌─────────────┐      │
│  │   免费轨道  │                    │   付费轨道  │      │
│  │   (25级)    │                    │   (25级)    │      │
│  │             │                    │             │      │
│  │ 250金币     │                    │ 400金币     │      │
│  │ 16张门票    │                    │ 35张门票    │      │
│  │             │                    │ 专属物品    │      │
│  └─────────────┘                    └─────────────┘      │
└─────────────────────────────────────────────────────────────┘
```

## 数据流架构

```
┌─────────────────┐    API调用    ┌─────────────────┐
│   客户端应用    │ ────────────► │   Convex API    │
└─────────────────┘               └─────────────────┘
                                          │
                                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    业务逻辑层                              │
│                                                           │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │BattlePass   │  │TaskSystem   │  │Tournament   │      │
│  │System       │  │             │  │System       │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
│                                                           │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │TicketSystem │  │PropSystem   │  │Integration  │      │
│  │             │  │             │  │Services     │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
└─────────────────────────────────────────────────────────────┘
                                          │
                                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    数据存储层                              │
│                                                           │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │player_battle│  │player_tasks │  │tournaments  │      │
│  │_pass        │  │             │  │             │      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
│                                                           │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │player_ticket│  │player_props │  │season_point │      │
│  │s            │  │             │  │_transactions│      │
│  └─────────────┘  └─────────────┘  └─────────────┘      │
└─────────────────────────────────────────────────────────────┘
```

## 赛季循环机制

```
┌─────────────────┐    赛季开始    ┌─────────────────┐
│   赛季重置      │ ────────────► │   新赛季开始    │
│                 │               │                │
│ • 赛季积分清零  │               │ • 新Battle Pass │
│ • 任务重新分配  │               │ • 新锦标赛      │
│ • 进度重置      │               │ • 新任务        │
└─────────────────┘               └─────────────────┘
         │                                │
         │                                │
         │                                │
         ▼                                ▼
┌─────────────────┐               ┌─────────────────┐
│   赛季进行中    │               │   赛季结束      │
│                 │               │                │
│ • 赛季积分累积  │               │ • 奖励发放      │
│ • 进度推进      │               │ • 数据统计      │
│ • 活动参与      │               │ • 准备重置      │
└─────────────────┘               └─────────────────┘
         │                                │
         │                                │
         └──────────── 28天 ──────────────┘
```

## 玩家类型与进度

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│    新玩家       │    │   休闲玩家      │    │   竞技玩家      │
│   (6.5级)       │    │   (16.5级)      │    │   (28级)        │
│                 │    │                 │    │                 │
│ • 每日登录      │    │ • 每日任务      │    │ • 锦标赛前10%   │
│ • 基础任务      │    │ • 道具对局      │    │ • 所有任务      │
│ • 简单对局      │    │ • 社交活动      │    │ • 道具对局      │
│                 │    │                 │    │                 │
│ 3250赛季积分    │    │ 8250赛季积分    │    │ 14000赛季积分   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 经济系统平衡

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   免费玩家      │    │   付费玩家      │    │   系统平衡      │
│                 │    │                 │    │                 │
│ • 50-100金币/日 │    │ • 100-200金币/日│    │ • 8-12%付费转化 │
│ • 80-150赛季积分│    │ • 150-300赛季积分│   │ • 30-40%参与度  │
│ • 6.5级预期     │    │ • 16.5级预期    │    │ • <15%流失率    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## API集成关系

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   对局系统      │    │   任务系统      │    │   锦标赛系统    │
│                 │    │                 │    │                 │
│ • 快速对局      │    │ • 任务完成      │    │ • 锦标赛结束    │
│ • 道具对局      │    │ • 进度更新      │    │ • 排名确定      │
│ • 胜利/失败     │    │ • 奖励发放      │    │ • 奖励发放      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────────────────────────────────────────────────────┐
│                    赛季积分系统                               │
│                                                               │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐      │
│  │  自动添加   │    │  进度更新   │    │  奖励发放   │      │
│  │  赛季积分   │    │  Battle Pass│    │   金币/门票 │      │
│  └─────────────┘    └─────────────┘    └─────────────┘      │
└─────────────────────────────────────────────────────────────────┘
```

这个架构设计确保了：
1. **统一性**: 赛季积分作为核心经济系统
2. **模块化**: 各系统独立但相互集成
3. **可扩展性**: 易于添加新功能和系统
4. **平衡性**: 免费和付费玩家都能获得价值
5. **可持续性**: 赛季循环保持长期运营活力 